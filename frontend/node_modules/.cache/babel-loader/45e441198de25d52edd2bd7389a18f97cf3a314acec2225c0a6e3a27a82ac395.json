{"ast":null,"code":"import _objectSpread from\"C:/Users/lcyke/OneDrive/Masa\\xFCst\\xFC/NereyeApp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useContext}from'react';import{useNavigate}from'react-router-dom';import Navbar from'../components/Navbar';import{userService}from'../services/api';import'./Login.css';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const navigate=useNavigate();const[formData,setFormData]=useState({user_name:'',password:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const{isLoggedIn,login}=useContext(AuthContext);useEffect(()=>{if(isLoggedIn){navigate('/');}},[isLoggedIn,navigate]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);try{const response=await userService.login(formData);if(response&&response.data&&response.data.token){console.log('Gelen token:',response.data.token);// Doğru şekilde tokeni logla\nlogin(response.data.token);// Context güncellenir, Navbar otomatik render olur\nconsole.log('Giriş başarılı');// Başarılı giriş mesajı\nnavigate('/');}else{setError('Token alınamadı!');}}catch(err){setError('Giriş başarısız. Lütfen bilgilerinizi kontrol edin.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-page\",children:[/*#__PURE__*/_jsx(Navbar,{siteName:\"Nereye\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Giri\\u015F Yap\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"user_name\",name:\"user_name\",value:formData.user_name,onChange:handleChange,placeholder:\" \",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"user_name\",children:\"Kullan\\u0131c\\u0131 Ad\\u0131\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:\" \",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u015Eifre\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",disabled:loading,children:loading?'Giriş Yapılıyor...':'Giriş Yap'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"register-link\",children:[\"Hesab\\u0131n\\u0131z yok mu? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Kay\\u0131t Ol\"})]})]})]});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","useContext","useNavigate","Navbar","userService","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","navigate","formData","setFormData","user_name","password","error","setError","loading","setLoading","isLoggedIn","login","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","response","data","token","console","log","err","className","children","siteName","onSubmit","type","id","onChange","placeholder","required","htmlFor","disabled","href"],"sources":["C:/Users/lcyke/OneDrive/Masaüstü/NereyeApp/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Navbar from '../components/Navbar';\nimport { userService } from '../services/api';\nimport './Login.css';\nimport { AuthContext } from '../context/AuthContext';\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    user_name: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { isLoggedIn, login } = useContext(AuthContext);\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      navigate('/');\n    }\n  }, [isLoggedIn, navigate]);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    try {\n      const response = await userService.login(formData);\n      if (response && response.data && response.data.token) {\n        console.log('Gelen token:', response.data.token); // Doğru şekilde tokeni logla\n        login(response.data.token); // Context güncellenir, Navbar otomatik render olur\n        console.log('Giriş başarılı'); // Başarılı giriş mesajı\n        navigate('/');\n      } else {\n        setError('Token alınamadı!');\n      }\n    } catch (err) {\n      setError('Giriş başarısız. Lütfen bilgilerinizi kontrol edin.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"login-page\">\n      <Navbar siteName=\"Nereye\" />\n      <div className=\"login-container\">\n        <h2>Giriş Yap</h2>\n        {error && <div className=\"error-message\">{error}</div>}\n        <form onSubmit={handleSubmit} className=\"login-form\">\n          <div className=\"input-group\">\n            <input\n              type=\"text\"\n              id=\"user_name\"\n              name=\"user_name\"\n              value={formData.user_name}\n              onChange={handleChange}\n              placeholder=\" \"\n              required\n            />\n            <label htmlFor=\"user_name\">Kullanıcı Adı</label>\n          </div>\n          <div className=\"input-group\">\n            <input\n              type=\"password\"\n              id=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              placeholder=\" \"\n              required\n            />\n            <label htmlFor=\"password\">Şifre</label>\n          </div>\n          <button type=\"submit\" className=\"login-button\" disabled={loading}>\n            {loading ? 'Giriş Yapılıyor...' : 'Giriş Yap'}\n          </button>\n        </form>\n        <p className=\"register-link\">\n          Hesabınız yok mu? <a href=\"/register\">Kayıt Ol</a>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}