{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import Navbar from'../components/Navbar';import api from'../services/api';import'./Profile.css';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const{isLoggedIn}=useContext(AuthContext);// Token'dan username'i decode etmek için basit bir JWT decode fonksiyonu\nfunction parseJwt(token){try{return JSON.parse(atob(token.split('.')[1]));}catch(e){return null;}}useEffect(()=>{const fetchProfile=async()=>{try{const token=localStorage.getItem('token');let username='';if(token){const decoded=parseJwt(token);username=decoded===null||decoded===void 0?void 0:decoded.sub;}if(!username){setUser(null);setLoading(false);return;}// Query parametresi ile GET isteği\nconst response=await api.get(\"/user/profile?username=\".concat(username));setUser(response.data);}catch(error){setUser(null);}finally{setLoading(false);}};fetchProfile();},[]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsx(Navbar,{siteName:\"Nereye\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profil\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Y\\xFCkleniyor...\"})]})]});}if(!user){return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsx(Navbar,{siteName:\"Nereye\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profil\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Profil bilgileri al\\u0131namad\\u0131.\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",style:{minHeight:'100vh',background:\"url('https://images.unsplash.com/photo-1503376780353-7e6692767b70?auto=format&fit=crop&w=1920&q=80') no-repeat center center/cover\",position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-bg-overlay\"}),/*#__PURE__*/_jsx(Navbar,{siteName:\"Nereye\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"profile-title\",children:\"Profil Bilgilerim\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile-label\",children:\"Kullan\\u0131c\\u0131 Ad\\u0131:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:user.user_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile-label\",children:\"Ad:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:user.first_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile-label\",children:\"Soyad:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:user.last_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile-label\",children:\"E-posta:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:user.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile-label\",children:\"Telefon:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:user.phone_number})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"profile-logout-btn\",onClick:()=>{if(window.confirm('Çıkış yapmak istiyor musunuz?')){localStorage.removeItem('token');window.location.href='/login';}},children:\"\\xC7\\u0131k\\u0131\\u015F Yap\"})]})]});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","useContext","Navbar","api","AuthContext","jsx","_jsx","jsxs","_jsxs","Profile","user","setUser","loading","setLoading","isLoggedIn","parseJwt","token","JSON","parse","atob","split","e","fetchProfile","localStorage","getItem","username","decoded","sub","response","get","concat","data","error","className","children","siteName","style","minHeight","background","position","user_name","first_name","last_name","email","phone_number","onClick","window","confirm","removeItem","location","href"],"sources":["C:/Users/lcyke/OneDrive/Masaüstü/NereyeApp/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport Navbar from '../components/Navbar';\nimport api from '../services/api';\nimport './Profile.css';\nimport { AuthContext } from '../context/AuthContext';\n\nconst Profile = () => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const { isLoggedIn } = useContext(AuthContext);\n\n  // Token'dan username'i decode etmek için basit bir JWT decode fonksiyonu\n  function parseJwt(token) {\n    try {\n      return JSON.parse(atob(token.split('.')[1]));\n    } catch (e) {\n      return null;\n    }\n  }\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        let username = '';\n        if (token) {\n          const decoded = parseJwt(token);\n          username = decoded?.sub;\n        }\n        if (!username) {\n          setUser(null);\n          setLoading(false);\n          return;\n        }\n        // Query parametresi ile GET isteği\n        const response = await api.get(`/user/profile?username=${username}`);\n        setUser(response.data);\n      } catch (error) {\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProfile();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"profile-page\">\n        <Navbar siteName=\"Nereye\" />\n        <div className=\"profile-container\">\n          <h2>Profil</h2>\n          <p>Yükleniyor...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"profile-page\">\n        <Navbar siteName=\"Nereye\" />\n        <div className=\"profile-container\">\n          <h2>Profil</h2>\n          <p>Profil bilgileri alınamadı.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"profile-page\" style={{ minHeight: '100vh', background: \"url('https://images.unsplash.com/photo-1503376780353-7e6692767b70?auto=format&fit=crop&w=1920&q=80') no-repeat center center/cover\", position: 'relative' }}>\n      <div className=\"profile-bg-overlay\"></div>\n      <Navbar siteName=\"Nereye\" />\n      <div className=\"profile-container\">\n        <h2 className=\"profile-title\">Profil Bilgilerim</h2>\n        <div className=\"profile-card\">\n          <div className=\"profile-row\">\n            <span className=\"profile-label\">Kullanıcı Adı:</span>\n            <span className=\"profile-value\">{user.user_name}</span>\n          </div>\n          <div className=\"profile-row\">\n            <span className=\"profile-label\">Ad:</span>\n            <span className=\"profile-value\">{user.first_name}</span>\n          </div>\n          <div className=\"profile-row\">\n            <span className=\"profile-label\">Soyad:</span>\n            <span className=\"profile-value\">{user.last_name}</span>\n          </div>\n          <div className=\"profile-row\">\n            <span className=\"profile-label\">E-posta:</span>\n            <span className=\"profile-value\">{user.email}</span>\n          </div>\n          <div className=\"profile-row\">\n            <span className=\"profile-label\">Telefon:</span>\n            <span className=\"profile-value\">{user.phone_number}</span>\n          </div>\n        </div>\n        <button className=\"profile-logout-btn\" onClick={() => { if(window.confirm('Çıkış yapmak istiyor musunuz?')) { localStorage.removeItem('token'); window.location.href = '/login'; } }}>Çıkış Yap</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}